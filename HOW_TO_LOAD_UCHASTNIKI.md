# üì• –ö–∞–∫ –∑–∞–≥—Ä—É–∑–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–∑ Excel –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

**–ó–∞–≥—Ä—É–∑–∫–∞ –ù–ï –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!** –ù—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –≤—Ä—É—á–Ω—É—é.

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ñ–∞–π–ª `uchast.xlsx`

–§–∞–π–ª –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ **–∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞** (—Ç–∞–º –∂–µ, –≥–¥–µ `main.py`).

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞:
- **–§–ò–û** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - –ø–æ–ª–Ω–æ–µ –∏–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞
- **–ö—É—Ä—Å** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –∫—É—Ä—Å –æ–±—É—á–µ–Ω–∏—è
- **–§–∞–∫—É–ª—å—Ç–µ—Ç** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Ñ–∞–∫—É–ª—å—Ç–µ—Ç
- **telegram_username** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - username –≤ Telegram (—Å @ –∏–ª–∏ –±–µ–∑)

–ü—Ä–∏–º–µ—Ä:
```
–§–ò–û              | –ö—É—Ä—Å | –§–∞–∫—É–ª—å—Ç–µ—Ç | telegram_username
–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω       | 2    | –§–∏–Ω—Ñ–∞–∫    | @ivanov
–ü–µ—Ç—Ä–æ–≤–∞ –ê–Ω–Ω–∞      | 3    | –≠–∫–æ–Ω–æ–º    | petrova
–°–∏–¥–æ—Ä–æ–≤ –ü–µ—Ç—Ä      | 1    | –Æ—Ä—Ñ–∞–∫     | 
```

### –®–∞–≥ 2: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞
docker-compose exec bot alembic current

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
docker-compose exec bot alembic upgrade head
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞)

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
cd /Users/katusha/Desktop/Shend-1

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç
docker-compose exec bot python scripts/load_uchastniki.py
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –†–µ–∂–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏)

```bash
docker-compose exec bot python scripts/load_uchastniki.py --update
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:

```
‚úÖ –ü—Ä–æ—á–∏—Ç–∞–Ω–æ 120 —Å—Ç—Ä–æ–∫ –∏–∑ uchast.xlsx
üìä –ù–∞–π–¥–µ–Ω–æ 85 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ BotUser –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è

‚úÖ –°—Ç—Ä–æ–∫–∞ 2: –¥–æ–±–∞–≤–ª–µ–Ω '–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω' —Å tg_id=123456789
‚úÖ –°—Ç—Ä–æ–∫–∞ 3: –¥–æ–±–∞–≤–ª–µ–Ω '–ü–µ—Ç—Ä–æ–≤–∞ –ê–Ω–Ω–∞' (–±–µ–∑ tg_id)
...

==================================================
‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
==================================================
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤—ã—Ö: 115
   üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: 5
   ‚è≠Ô∏è  –ü—Ä–æ–ø—É—â–µ–Ω–æ: 0
   üîó –°–≤—è–∑–∞–Ω–æ —Å BotUser: 85
   ‚ùå –û—à–∏–±–æ–∫: 0
   üìà –í—Å–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 120
==================================================
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:

```bash
# –í–æ–π—Ç–∏ –≤ PostgreSQL
docker-compose exec db psql -U postgres -d shabot_db

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
SELECT id, full_name, telegram_username, tg_id FROM uchastniki LIMIT 10;

# –ü–æ—Å—á–∏—Ç–∞—Ç—å —Å–∫–æ–ª—å–∫–æ —Å tg_id
SELECT 
    COUNT(*) as total,
    COUNT(tg_id) as with_tg_id,
    COUNT(*) - COUNT(tg_id) as without_tg_id
FROM uchastniki;

# –í—ã–π—Ç–∏
\q
```

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "–§–∞–π–ª uchast.xlsx –Ω–µ –Ω–∞–π–¥–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
ls -la /Users/katusha/Desktop/Shend-1/uchast.xlsx

# –ï—Å–ª–∏ —Ñ–∞–π–ª –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ:
cp /–ø—É—Ç—å/–∫/—Ñ–∞–π–ª—É/uchast.xlsx /Users/katusha/Desktop/Shend-1/
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "Container not found"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose up -d

# –ü–æ–¥–æ–∂–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥, –∑–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç
docker-compose exec bot python scripts/load_uchastniki.py
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "Table 'uchastniki' does not exist"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
docker-compose exec bot alembic upgrade head
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: "ModuleNotFoundError: No module named 'pandas'"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (pandas –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ requirements.txt)
docker-compose build
docker-compose up -d
```

## üìä –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ

1. **–ß—Ç–µ–Ω–∏–µ Excel** - —Å–∫—Ä–∏–ø—Ç —á–∏—Ç–∞–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ `uchast.xlsx`
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ BotUser** - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å `telegram_username` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –≤ `BotUser`
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ** - –µ—Å–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫ –Ω–∞–π–¥–µ–Ω –≤ `BotUser`, –µ–≥–æ `tg_id` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `uchastniki`

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞:
- ‚úÖ –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏–∑ Excel –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ —Ç–∞–±–ª–∏—Ü—É `uchastniki`
- ‚úÖ –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Å `telegram_username`, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ `BotUser`, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏–ª–∏ `tg_id`
- ‚úÖ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `/uch_rass` –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ò–º–ø–æ—Ä—Ç (–æ–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º)
docker-compose exec bot python scripts/load_uchastniki.py

# –ò–º–ø–æ—Ä—Ç (—Ä–µ–∂–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
docker-compose exec bot python scripts/load_uchastniki.py --update

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
docker-compose exec db psql -U postgres -d shabot_db -c "SELECT COUNT(*) FROM uchastniki;"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å tg_id
docker-compose exec db psql -U postgres -d shabot_db -c "SELECT COUNT(*) FROM uchastniki WHERE tg_id IS NOT NULL;"
```

---

**–ì–æ—Ç–æ–≤–æ!** –ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `/uch_rass` –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º! üöÄ

