# üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –º–∏–≥—Ä–∞—Ü–∏–π

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü —Å–∏—Å—Ç–µ–º—ã —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π:
- `interviewers` - —Å–æ–±–µ—Å–µ–¥—É—é—â–∏–µ
- `time_slots` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã
- `interviews` - –∑–∞–ø–∏—Å–∏ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è
- `interview_messages` - —Å–æ–æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É —Å—Ç—É–¥–µ–Ω—Ç–æ–º –∏ —Å–æ–±–µ—Å–µ–¥—É—é—â–∏–º

## üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

```bash
# –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "Add interview booking system with Google Sheets integration"
git push
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@YOUR_SERVER

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /root/Shend

# –ü–æ–¥—Ç—è–Ω—É—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull
```

### –®–∞–≥ 3: –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å JSON credentials (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω)

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
scp C:\Users\anato\Downloads\sha-otbor-476513-9c6d0a1d252c.json root@YOUR_SERVER:/root/Shend/

# –ò–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ - –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–∫-—Ç–æ –∏–Ω–∞—á–µ
```

### –®–∞–≥ 4: –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

```bash
# –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –±–æ—Ç–æ–º
docker exec -it shend-bot-1 bash

# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
alembic revision --autogenerate -m "add interview system tables and fields"

# Alembic —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª migration/versions/XXXX_add_interview_system_tables_and_fields.py
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
ls -la migration/versions/
cat migration/versions/XXXX_add_interview_system_tables_and_fields.py

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏:
# - op.create_table('interviewers', ...)
# - op.create_table('time_slots', ...)
# - op.create_table('interviews', ...)
# - op.create_table('interview_messages', ...)
```

### –®–∞–≥ 6: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
alembic upgrade head

# –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
# INFO  [alembic.runtime.migration] Running upgrade XXXX -> YYYY, add interview system tables and fields
```

### –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã

```bash
# –í—ã–π—Ç–∏ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±–æ—Ç–∞
exit

# –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä postgres
docker exec -it shend-postgres-1 psql -U shabot -d shabot

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
\dt

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
# - interviewers
# - time_slots
# - interviews
# - interview_messages

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü
\d interviewers
\d time_slots
\d interviews
\d interview_messages

# –í—ã–π—Ç–∏ –∏–∑ postgres
\q
```

### –®–∞–≥ 8: –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞

```bash
# –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /root/Shend

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: gspread, google-auth)
docker-compose build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose down
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs -f bot

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: "–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç !"
# Ctrl+C —á—Ç–æ–±—ã –≤—ã–π—Ç–∏ –∏–∑ –ª–æ–≥–æ–≤
```

### –®–∞–≥ 9: –î–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ Google Sheets

**Email —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞:** `sha-bot-sobes@sha-otbor-476513.iam.gserviceaccount.com`

#### –¢–∞–±–ª–∏—Ü–∞ 1: –ü–∞—Ä–æ–ª–∏ —Å–æ–±–µ—Å–µ–¥—É—é—â–∏—Ö
https://docs.google.com/spreadsheets/d/132W-Q8bZhyPbfOmJkXpfRLsOZ3l-pqHpO8vmy8hxGec

1. –û—Ç–∫—Ä—ã—Ç—å —Ç–∞–±–ª–∏—Ü—É
2. –ö–Ω–æ–ø–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–∞" / "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
3. –î–æ–±–∞–≤–∏—Ç—å: `sha-bot-sobes@sha-otbor-476513.iam.gserviceaccount.com`
4. –†–æ–ª—å: **–ß–∏—Ç–∞—Ç–µ–ª—å**
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

#### –¢–∞–±–ª–∏—Ü–∞ 2: –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
https://docs.google.com/spreadsheets/d/1b89aY_hiv1qaPvE5Iuwr_lKYsvo1e3l3qtOZYSHQoQU

1. –û—Ç–∫—Ä—ã—Ç—å —Ç–∞–±–ª–∏—Ü—É
2. –ö–Ω–æ–ø–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–∞" / "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
3. –î–æ–±–∞–≤–∏—Ç—å: `sha-bot-sobes@sha-otbor-476513.iam.gserviceaccount.com`
4. –†–æ–ª—å: **–ß–∏—Ç–∞—Ç–µ–ª—å**
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

### –®–∞–≥ 10: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

#### –¢–µ—Å—Ç 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–≥–æ

```
1. –û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å: /register_sobes
3. –í–≤–µ—Å—Ç–∏ –∫–æ–¥ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã (5 —Ü–∏—Ñ—Ä)
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –§–ò–û
5. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: "‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
```

#### –¢–µ—Å—Ç 2: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤ (–æ—Ç –∞–¥–º–∏–Ω–∞)

```
1. –û—Ç –∞–¥–º–∏–Ω–∞ (tg_id: 922109605)
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å: /sync_slots
3. –î–æ–ª–∂–Ω–∞ –Ω–∞—á–∞—Ç—å—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
4. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤—ã—Ö —Å–ª–æ—Ç–æ–≤: X
   ‚Ä¢ –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö: X
   ‚Ä¢ –ü—Ä–æ–ø—É—â–µ–Ω–æ: X
```

#### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î

```bash
docker exec -it shend-postgres-1 psql -U shabot -d shabot

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–±–µ—Å–µ–¥—É—é—â–∏—Ö
SELECT id, full_name, telegram_id, interviewer_sheet_id FROM interviewers;

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ª–æ—Ç—ã
SELECT id, interviewer_id, date, time_start, is_available FROM time_slots LIMIT 10;

\q
```

---

## üî• –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞ (–≤—Å—ë –≤ –æ–¥–Ω–æ–º)

–ï—Å–ª–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:

```bash
cd /root/Shend && \
git pull && \
docker exec -it shend-bot-1 alembic revision --autogenerate -m "add interview system tables and fields" && \
docker exec -it shend-bot-1 alembic upgrade head && \
docker-compose build && \
docker-compose down && \
docker-compose up -d && \
docker-compose logs -f bot
```

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "Container not found"

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd /root/Shend
docker-compose up -d
# –ü–æ–¥–æ–∂–¥–∞—Ç—å 5 —Å–µ–∫—É–Ω–¥
docker exec -it shend-bot-1 bash
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "alembic: command not found"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd /root/Shend
docker-compose build
docker-compose up -d
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "No changes detected"

**–ü—Ä–∏—á–∏–Ω–∞:** –ú–æ–¥–µ–ª–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –∏–ª–∏ —É–∂–µ –µ—Å—Ç—å –≤ –ë–î

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ models.py –æ–±–Ω–æ–≤–ª—ë–Ω
cat db/models.py | grep "class Interviewer"

# –ï—Å–ª–∏ –º–æ–¥–µ–ª–∏ –µ—Å—Ç—å, –Ω–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è:
# –í–æ–∑–º–æ–∂–Ω–æ —Ç–∞–±–ª–∏—Ü—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
docker exec -it shend-postgres-1 psql -U shabot -d shabot -c "\dt"
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: "ModuleNotFoundError: No module named 'gspread'"

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd /root/Shend
docker-compose build --no-cache
docker-compose up -d
```

### –ü—Ä–æ–±–ª–µ–º–∞ 5: "Error reading Google Sheets"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–∞–º –∏–ª–∏ –Ω–µ—Ç JSON —Ñ–∞–π–ª–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∞–π–ª `sha-otbor-476513-9c6d0a1d252c.json` –≤ `/root/Shend/`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ email –¥–æ–±–∞–≤–ª–µ–Ω –≤ –æ–±–µ —Ç–∞–±–ª–∏—Ü—ã
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ —Ñ–∞–π–ª–∞: `chmod 644 sha-otbor-476513-9c6d0a1d252c.json`

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:

- ‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í –ë–î –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü—ã: `interviewers`, `time_slots`, `interviews`, `interview_messages`
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/register_sobes` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/sync_slots` —Ä–∞–±–æ—Ç–∞–µ—Ç (–¥–ª—è –∞–¥–º–∏–Ω–∞)
- ‚úÖ Google Sheets —á–∏—Ç–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç! üöÄ

