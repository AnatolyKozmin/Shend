# üéâ –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–∞ - –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–ê!

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ú–æ–¥–µ–ª–∏ –ë–î (4 –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã)
- ‚úÖ `ReservTimeSlot` - —Å–ª–æ—Ç—ã –¥–ª—è –ª–∏—Å—Ç–∞ "—Ä–µ–∑–µ—Ä–≤"
- ‚úÖ `ReservBooking` - –∑–∞–ø–∏—Å–∏ –Ω–∞ "—Ä–µ–∑–µ—Ä–≤"
- ‚úÖ `FinfakTimeSlot` - —Å–ª–æ—Ç—ã –¥–ª—è –ª–∏—Å—Ç–∞ "—Ñ–∏–Ω—Ñ–∞–∫"
- ‚úÖ `FinfakBooking` - –∑–∞–ø–∏—Å–∏ –Ω–∞ "—Ñ–∏–Ω—Ñ–∞–∫"

### 2. –ü–∞—Ä—Å–∏–Ω–≥ Google Sheets
- ‚úÖ `/parse_reserv` - –ø–∞—Ä—Å–∏—Ç –ª–∏—Å—Ç "—Ä–µ–∑–µ—Ä–≤" (–¥–∞—Ç–∞: 08.11.2025)
- ‚úÖ `/parse_finfak` - –ø–∞—Ä—Å–∏—Ç –ª–∏—Å—Ç "—Ñ–∏–Ω—Ñ–∞–∫" (–¥–∞—Ç–∞: 07.11.2025)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –¥–µ–±–∞–≥-–≤—ã–≤–æ–¥ (–≤—Å–µ —Å–ª–æ—Ç—ã –±–µ–∑ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–æ–±–µ—Å–µ–¥—É—é—â–∏–º

### 3. –ó–∞–ø–∏—Å—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è
- ‚úÖ `/finfak` - –∑–∞–ø–∏—Å—å –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ "–§–∏–Ω—Ñ–∞–∫"
- ‚úÖ `/reserv` - –∑–∞–ø–∏—Å—å –¥–ª—è –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è `/finfak`)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–ø—Ä–æ—à–µ–¥—à–∏–µ –≤—Ä–µ–º–µ–Ω–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è)
- ‚úÖ –°—á–µ—Ç—á–∏–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç
- ‚úÖ –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –æ–¥–Ω–æ–≥–æ —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–≥–æ
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–ø–∏—Å–∏

### 4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—É
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–º—É —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–∞–Ω–¥–∏–¥–∞—Ç–µ
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "‚ùì –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–º—É"
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–º—É —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

### 5. –≠–∫—Å–ø–æ—Ä—Ç –≤ Google Sheets
- ‚úÖ –ú–∞—Ç—Ä–∏—á–Ω–∞—è –∑–∞–ø–∏—Å—å: "—Ñ–∏–Ω—Ñ–∞–∫_–∑–∞–ø–∏—Å–∏" –∏ "—Ä–µ–∑–µ—Ä–≤_–∑–∞–ø–∏—Å–∏"
- ‚úÖ –ü–æ—Å—Ç—Ä–æ—á–Ω–∞—è –∑–∞–ø–∏—Å—å: –ª–∏—Å—Ç "–≤—Å–µ–æ–±—â–∞—è"
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –±–æ—Ç–∞)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç rate limiting (–∑–∞–¥–µ—Ä–∂–∫–∏ 2 —Å–µ–∫)

---

## üìä –ö–æ–º–∞–Ω–¥—ã

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
```
/parse_reserv  - –ü–∞—Ä—Å–∏–Ω–≥ –ª–∏—Å—Ç–∞ "—Ä–µ–∑–µ—Ä–≤"
/parse_finfak  - –ü–∞—Ä—Å–∏–Ω–≥ –ª–∏—Å—Ç–∞ "—Ñ–∏–Ω—Ñ–∞–∫"
```

### –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:
```
/finfak  - –ó–∞–ø–∏—Å—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –§–∏–Ω—Ñ–∞–∫, 07.11.2025)
/reserv  - –ó–∞–ø–∏—Å—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ (–≤—Å–µ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—ã, 08.11.2025)
```

---

## üîÑ –§–ª–æ—É: –ó–∞–ø–∏—Å—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ

### –î–ª—è `/finfak`:
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /finfak
2. –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–∞–∫—É–ª—å—Ç–µ—Ç
   ‚úÖ –§–∏–Ω—Ñ–∞–∫ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ª–æ—Ç—ã
   ‚ùå –î—Ä—É–≥–æ–π ‚Üí –æ—Ç–∫–∞–∑
3. –ü–æ–∫–∞–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω —Å —Å—á–µ—Ç—á–∏–∫–æ–º
4. –í—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏
5. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
6. ‚úÖ –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ + –∫–Ω–æ–ø–∫–∞ "–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å"
7. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–º—É
8. –≠–∫—Å–ø–æ—Ä—Ç –≤ Google Sheets (—Ñ–æ–Ω)
```

### –î–ª—è `/reserv`:
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /reserv
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Å–∏—Å—Ç–µ–º–µ
3. –ü–æ–∫–∞–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω —Å —Å—á–µ—Ç—á–∏–∫–æ–º
4. –í—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏
5. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
6. ‚úÖ –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ + –∫–Ω–æ–ø–∫–∞ "–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å"
7. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–º—É
8. –≠–∫—Å–ø–æ—Ä—Ç –≤ Google Sheets (—Ñ–æ–Ω)
```

### –î–ª—è "–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å":
```
1. –ö–∞–Ω–¥–∏–¥–∞—Ç: –Ω–∞–∂–∏–º–∞–µ—Ç "‚ùì –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å"
2. –ë–æ—Ç: –ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ –≤–æ–ø—Ä–æ—Å
3. –ö–∞–Ω–¥–∏–¥–∞—Ç: –≤–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
4. –ë–æ—Ç ‚Üí –°–æ–±–µ—Å–µ–¥—É—é—â–µ–º—É:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ ‚ùì –í–æ–ø—Ä–æ—Å –æ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–∞:      ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ üë§ –§–ò–û: –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω         ‚îÇ
   ‚îÇ üì± Telegram: @ivanov        ‚îÇ
   ‚îÇ üìã –¢–∏–ø: –§–∏–Ω—Ñ–∞–∫              ‚îÇ
   ‚îÇ üìÖ –î–∞—Ç–∞: 07.11.2025         ‚îÇ
   ‚îÇ ‚è∞ –í—Ä–µ–º—è: 09:00             ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ       ‚îÇ
   ‚îÇ üí¨ –í–æ–ø—Ä–æ—Å:                  ‚îÇ
   ‚îÇ –ì–¥–µ –±—É–¥–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å         ‚îÇ
   ‚îÇ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ?              ‚îÇ
   ‚îÇ ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ       ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ –û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞–ø—Ä—è–º—É—é: @ivanov  ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
5. ‚úÖ –ö–∞–Ω–¥–∏–¥–∞—Ç—É: –≤–æ–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
```

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Google Sheets

### –¢–∞–±–ª–∏—Ü–∞: 1c6B_bwrvA1AUkMHtlL8YnzuzZhiZP_tnoZKSvpICn_c

#### –õ–∏—Å—Ç—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ (–≤—Ö–æ–¥–Ω—ã–µ):
- **"—Ä–µ–∑–µ—Ä–≤"** - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–æ–≤
- **"—Ñ–∏–Ω—Ñ–∞–∫"** - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –§–∏–Ω—Ñ–∞–∫–∞

#### –õ–∏—Å—Ç—ã –¥–ª—è –∑–∞–ø–∏—Å–∏ (–≤—ã—Ö–æ–¥–Ω—ã–µ):
- **"—Ä–µ–∑–µ—Ä–≤_–∑–∞–ø–∏—Å–∏"** - –º–∞—Ç—Ä–∏—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –∑–∞–ø–∏—Å—è–º–∏ (—Ä–µ–∑–µ—Ä–≤)
- **"—Ñ–∏–Ω—Ñ–∞–∫_–∑–∞–ø–∏—Å–∏"** - –º–∞—Ç—Ä–∏—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –∑–∞–ø–∏—Å—è–º–∏ (—Ñ–∏–Ω—Ñ–∞–∫)
- **"–≤—Å–µ–æ–±—â–∞—è"** - –ø–æ—Å—Ç—Ä–æ—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ –∑–∞–ø–∏—Å—è–º–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–∏—Å—Ç–æ–≤ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞:

```
|   A          |  B   |  C   |  D   | ... |   T   |
|--------------|------|------|------|-----|-------|
| –ò–º—è          | 9:00 | 9:45 |10:30 | ... |  ID   |  ‚Üê –°—Ç—Ä–æ–∫–∞ 1 (–∑–∞–≥–æ–ª–æ–≤–æ–∫)
| –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω  | –º–æ–≥—É |–Ω–µ –º–æ–≥—É| –º–æ–≥—É | ... | iv001 |  ‚Üê –°—Ç—Ä–æ–∫–∞ 2
| –ü–µ—Ç—Ä–æ–≤–∞ –ê–Ω–Ω–∞ |–Ω–µ –º–æ–≥—É| –º–æ–≥—É | –º–æ–≥—É | ... | pet02 |  ‚Üê –°—Ç—Ä–æ–∫–∞ 3
| ...          | ...  | ...  | ...  | ... | ...   |
|              |      |      |      | ... |       |  ‚Üê –°—Ç—Ä–æ–∫–∞ 25
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ "—Ñ–∏–Ω—Ñ–∞–∫_–∑–∞–ø–∏—Å–∏" / "—Ä–µ–∑–µ—Ä–≤_–∑–∞–ø–∏—Å–∏":

```
|   A          |  B   |  C   |  D   | ... |   T   |
|--------------|------|------|------|-----|-------|
| –ò–º—è          | 9:00 | 9:45 |10:30 | ... |  ID   |  ‚Üê –ó–∞–≥–æ–ª–æ–≤–æ–∫
| –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω  |–ü–µ—Ç—Ä–æ–≤|      |–°–∏–¥–æ—Ä–æ–≤|...| iv001 |  ‚Üê –§–ò–û –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ "–≤—Å–µ–æ–±—â–∞—è":

```
| –§–ò–û –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ | –¢–∏–ø    | ID –ø—Ä–æ–≤–æ–¥—è—â–µ–≥–æ | @–ø—Ä–æ–≤–æ–¥—è—â–∏–π | @–∫–∞–Ω–¥–∏–¥–∞—Ç | –í—Ä–µ–º—è |
|---------------|--------|----------------|-------------|-----------|-------|
| –ò–≤–∞–Ω–æ–≤ –ò.–ò.   | —Ñ–∏–Ω—Ñ–∞–∫ | iv001          | @inter1     | @stud1    | 09:00 |
| –ü–µ—Ç—Ä–æ–≤ –ü.–ü.   | —Ä–µ–∑–µ—Ä–≤ | sid02          | @inter2     | @stud2    | 10:30 |
```

---

## ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. **Google API Rate Limiting** üî¥ –ö–†–ò–¢–ò–ß–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞:** 
–ü—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–µ–≤—ã—à–µ–Ω—ã –ª–∏–º–∏—Ç—ã Google Sheets API.

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ –≤ –ª–æ–≥–∞—Ö: "APIError: Quota exceeded"
- –ó–∞–ø–∏—Å–∏ –≤ –ë–î –µ—Å—Ç—å, –Ω–æ –Ω–µ –ø–æ–ø–∞–ª–∏ –≤ Google Sheets

**–†–µ—à–µ–Ω–∏—è:**
```python
# ‚úÖ –£–ñ–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:
- –ó–∞–¥–µ—Ä–∂–∫–∞ 2 —Å–µ–∫ –ø–µ—Ä–µ–¥ —ç–∫—Å–ø–æ—Ä—Ç–æ–º
- –ó–∞–¥–µ—Ä–∂–∫–∞ 1 —Å–µ–∫ –º–µ–∂–¥—É –ª–∏—Å—Ç–∞–º–∏
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –±–æ—Ç–∞)
- Retry —Å exponential backoff

# üìù –ï–°–õ–ò –ë–£–î–ï–¢ –ü–†–û–ë–õ–ï–ú–ê:
- –£–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–æ 3-5 —Å–µ–∫—É–Ω–¥
- –î–æ–±–∞–≤–∏—Ç—å –æ—á–µ—Ä–µ–¥—å —ç–∫—Å–ø–æ—Ä—Ç–∞ (–Ω–µ –±–æ–ª–µ–µ 1 —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ —Å–µ–∫—É–Ω–¥—É)
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
```bash
docker-compose logs -f bot | grep "–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞"
```

### 2. **–õ–∏—Å—Ç—ã "—Ä–µ–∑–µ—Ä–≤_–∑–∞–ø–∏—Å–∏" –∏ "—Ñ–∏–Ω—Ñ–∞–∫_–∑–∞–ø–∏—Å–∏" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç** üü° –í–ê–ñ–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–ø–∏—Å–∏ –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å –ª–∏—Å—Ç–æ–≤ –¥–ª—è –º–∞—Ç—Ä–∏—á–Ω–æ–π –∑–∞–ø–∏—Å–∏.

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –ª–æ–≥–∞—Ö: "–õ–∏—Å—Ç '—Ä–µ–∑–µ—Ä–≤_–∑–∞–ø–∏—Å–∏' –Ω–µ –Ω–∞–π–¥–µ–Ω"
- –ó–∞–ø–∏—Å—å –≤ "–≤—Å–µ–æ–±—â–∞—è" —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–∞—Ç—Ä–∏—á–Ω–∞—è - –Ω–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–æ–∑–¥–∞—Ç—å –ª–∏—Å—Ç—ã –≤—Ä—É—á–Ω—É—é –î–û –ø–µ—Ä–≤–æ–π –∑–∞–ø–∏—Å–∏:
1. –û—Ç–∫—Ä—ã—Ç—å —Ç–∞–±–ª–∏—Ü—É
2. –°–æ–∑–¥–∞—Ç—å –ª–∏—Å—Ç "—Ä–µ–∑–µ—Ä–≤_–∑–∞–ø–∏—Å–∏" (—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ "—Ä–µ–∑–µ—Ä–≤")
3. –°–æ–∑–¥–∞—Ç—å –ª–∏—Å—Ç "—Ñ–∏–Ω—Ñ–∞–∫_–∑–∞–ø–∏—Å–∏" (—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ "—Ñ–∏–Ω—Ñ–∞–∫")
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ö–æ–¥ –º–æ–ª—á–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –æ—à–∏–±–∫—É, –ª–∏—Å—Ç "–≤—Å–µ–æ–±—â–∞—è" –≤—Å—ë —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è.

### 3. **Race Condition –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏** üü° –†–ï–î–ö–û

**–ü—Ä–æ–±–ª–µ–º–∞:**
–î–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–æ–≥—É—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞–∂–∞—Ç—å –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–ª–æ—Ç.

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–∏—Å–∞–Ω, –≤—Ç–æ—Ä–æ–π –ø–æ–ª—É—á–∏–ª –æ—à–∏–±–∫—É "–≤—Ä–µ–º—è —É–∂–µ –∑–∞–Ω—è—Ç–æ"

**–†–µ—à–µ–Ω–∏–µ (–£–ñ–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û):**
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ is_available –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ (—Å—Ç—Ä–æ–∫–∞ 516, 860)
slot = select(TimeSlotModel).where(
    TimeSlotModel.id == selected_slot_id,
    TimeSlotModel.is_available == True  # ‚Üê –ó–∞—â–∏—Ç–∞
)
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è production:**
–î–æ–±–∞–≤–∏—Ç—å `SELECT FOR UPDATE` –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å—Ç—Ä–æ–∫–∏:
```python
slot_stmt = select(TimeSlotModel).where(...).with_for_update()
```

### 4. **ID —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–≥–æ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç** üü° –í–ê–ñ–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞:**
ID –≤ –∫–æ–ª–æ–Ω–∫–µ T Google Sheets –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `interviewer_sheet_id` –≤ –ë–î.

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –ø–∞—Ä—Å–∏–Ω–≥–µ: "–ü—Ä–æ–ø—É—â–µ–Ω–æ: –≤—Å–µ —Å–æ–±–µ—Å–µ–¥—É—é—â–∏–µ"
- –í —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ: 0 —Å–æ–±–µ—Å–µ–¥—É—é—â–∏—Ö —Å–æ —Å–ª–æ—Ç–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ:**
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ID –≤ –ë–î
SELECT id, full_name, interviewer_sheet_id FROM interviewers;

-- –î–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∫–æ–ª–æ–Ω–∫–æ–π T –≤ Google Sheets
```

### 5. **Username –≤ Telegram –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** üü¢ –ù–û–†–ú–ê

**–ü—Ä–æ–±–ª–µ–º–∞:**
–£ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –∏–ª–∏ —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–≥–æ –Ω–µ—Ç username –≤ Telegram.

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏: "@–Ω–µ —É–∫–∞–∑–∞–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –∫–æ–¥ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–∞–∫–∏–µ —Å–ª—É—á–∞–∏. –°–æ–±–µ—Å–µ–¥—É—é—â–∏–π –≤—Å—ë —Ä–∞–≤–Ω–æ –≤–∏–¥–∏—Ç –§–ò–û.

### 6. **–í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞** üü° –ü–†–û–í–ï–†–ò–¢–¨

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –≤ –º–æ—Å–∫–æ–≤—Å–∫–æ–π –∑–æ–Ω–µ, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
docker exec -it shend-bot-1 date
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –º–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è
```

**–†–µ—à–µ–Ω–∏–µ (–£–ñ–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û):**
```python
MOSCOW_TZ = pytz.timezone('Europe/Moscow')
now_moscow = datetime.now(MOSCOW_TZ)
```

### 7. **–ü—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –≤ Google Sheets** üü¢ –û–ë–†–ê–ë–ê–¢–´–í–ê–ï–¢–°–Ø

**–ü—Ä–æ–±–ª–µ–º–∞:**
–í —Ç–∞–±–ª–∏—Ü–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ —è—á–µ–π–∫–∏.

**–†–µ—à–µ–Ω–∏–µ (–£–ñ–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û):**
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏ –±–µ–∑ –∏–º–µ–Ω–∏
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏ –±–µ–∑ ID
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —è—á–µ–π–∫–∏ –±–µ–∑ "–º–æ–≥—É"

---

## üöÄ –î–µ–ø–ª–æ–π –≤ Docker

### –®–∞–≥ 1: –ö–æ–º–º–∏—Ç –∏ –ø—É—à

```bash
cd /Users/katusha/Desktop/Shend

git add .
git commit -m "Add complete reserv system with /finfak and /reserv commands"
git push
```

### –®–∞–≥ 2: –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
cd /root/Shend
git pull

# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–æ—Ç–∞
docker exec -it shend-bot-1 bash

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pytz
pip install pytz==2024.1

# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
alembic revision --autogenerate -m "add reserv and finfak booking tables"

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
alembic upgrade head

# –í—ã–π—Ç–∏
exit

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç
docker-compose restart bot

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs -f bot
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å –ª–∏—Å—Ç—ã –≤ Google Sheets

1. –û—Ç–∫—Ä—ã—Ç—å —Ç–∞–±–ª–∏—Ü—É: https://docs.google.com/spreadsheets/d/1c6B_bwrvA1AUkMHtlL8YnzuzZhiZP_tnoZKSvpICn_c

2. –°–æ–∑–¥–∞—Ç—å –ª–∏—Å—Ç—ã (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç):
   - **"—Ä–µ–∑–µ—Ä–≤_–∑–∞–ø–∏—Å–∏"** (—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ "—Ä–µ–∑–µ—Ä–≤")
   - **"—Ñ–∏–Ω—Ñ–∞–∫_–∑–∞–ø–∏—Å–∏"** (—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ "—Ñ–∏–Ω—Ñ–∞–∫")
   - **"–≤—Å–µ–æ–±—â–∞—è"** (—Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–ø–∏—Å–∏)

### –®–∞–≥ 4: –î–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ

Email –¥–ª—è –¥–æ—Å—Ç—É–ø–∞:
```
sha-bot-sobes@sha-otbor-476513.iam.gserviceaccount.com
```

–ü—Ä–∞–≤–∞: **–†–µ–¥–∞–∫—Ç–æ—Ä**

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü–∞—Ä—Å–∏–Ω–≥ –ª–∏—Å—Ç–æ–≤

```
/parse_reserv
‚Üí –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –ª–∏—Å—Ç—É "—Ä–µ–∑–µ—Ä–≤"

/parse_finfak
‚Üí –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –ª–∏—Å—Ç—É "—Ñ–∏–Ω—Ñ–∞–∫"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î:**
```bash
docker exec -it shend-db-1 psql -U postgres -d –≤–∞—à–∞_–±–∞–∑–∞

SELECT sheet_name, COUNT(*) FROM reserv_time_slots GROUP BY sheet_name;
-- –û–∂–∏–¥–∞–µ—Ç—Å—è: –ø—É—Å—Ç–æ (–¥–ª—è reserv)

SELECT COUNT(*) FROM finfak_time_slots;
-- –û–∂–∏–¥–∞–µ—Ç—Å—è: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ—Ç–æ–≤

\q
```

### 2. –ó–∞–ø–∏—Å—å –Ω–∞ —Ñ–∏–Ω—Ñ–∞–∫

**–û—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–æ–º "–§–∏–Ω—Ñ–∞–∫":**
```
/finfak
‚Üí –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å–ª–æ—Ç—ã —Å –¥–∞—Ç–æ–π 07.11.2025
‚Üí –í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è
‚Üí –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
‚Üí ‚úÖ –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞!
‚Üí –ö–Ω–æ–ø–∫–∞ "‚ùì –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–º—É"
```

**–û—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –¥—Ä—É–≥–∏–º —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–æ–º:**
```
/finfak
‚Üí ‚ùå –ó–∞–ø–∏—Å—å –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ "–§–∏–Ω—Ñ–∞–∫"
```

### 3. –ó–∞–ø–∏—Å—å –Ω–∞ —Ä–µ–∑–µ—Ä–≤

**–û—Ç –ª—é–±–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```
/reserv
‚Üí –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å–ª–æ—Ç—ã —Å –¥–∞—Ç–æ–π 08.11.2025
‚Üí –í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è
‚Üí –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
‚Üí ‚úÖ –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞!
‚Üí –ö–Ω–æ–ø–∫–∞ "‚ùì –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–º—É"
```

### 4. –í–æ–ø—Ä–æ—Å —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–º—É

```
1. –ù–∞–∂–∞—Ç—å "‚ùì –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å"
2. –ù–∞–ø–∏—Å–∞—Ç—å –≤–æ–ø—Ä–æ—Å
3. ‚úÖ –í–æ–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
4. –°–æ–±–µ—Å–µ–¥—É—é—â–∏–π –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å:
   - –§–ò–û –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
   - Telegram username
   - –¢–∏–ø (—Ñ–∏–Ω—Ñ–∞–∫/—Ä–µ–∑–µ—Ä–≤)
   - –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
   - –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ Google Sheets

**–õ–∏—Å—Ç "–≤—Å–µ–æ–±—â–∞—è":**
- –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Å –∑–∞–ø–∏—Å—å—é
- –§–æ—Ä–º–∞—Ç: –§–ò–û | –¢–∏–ø | ID | @–ø—Ä–æ–≤–æ–¥—è—â–∏–π | @–∫–∞–Ω–¥–∏–¥–∞—Ç | –í—Ä–µ–º—è

**–õ–∏—Å—Ç—ã "—Ñ–∏–Ω—Ñ–∞–∫_–∑–∞–ø–∏—Å–∏" / "—Ä–µ–∑–µ—Ä–≤_–∑–∞–ø–∏—Å–∏":**
- –§–ò–û –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –≤ —è—á–µ–π–∫–µ (–≤—Ä–µ–º—è √ó —Å–æ–±–µ—Å–µ–¥—É—é—â–∏–π)

---

## üìÅ –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
Shend/
‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îî‚îÄ‚îÄ models.py                    # ‚úÖ +4 –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ reserv_parser.py             # ‚úÖ –ù–û–í–´–ô - –ø–∞—Ä—Å–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ finfak_export.py             # ‚úÖ –ù–û–í–´–ô - —ç–∫—Å–ø–æ—Ä—Ç —Ñ–∏–Ω—Ñ–∞–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ reserv_export.py             # ‚úÖ –ù–û–í–´–ô - —ç–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑–µ—Ä–≤–∞
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îî‚îÄ‚îÄ reserv_handlers.py           # ‚úÖ –ù–û–í–´–ô - 1148 —Å—Ç—Ä–æ–∫!
‚îÇ       ‚îú‚îÄ‚îÄ /parse_reserv            # –ü–∞—Ä—Å–∏–Ω–≥
‚îÇ       ‚îú‚îÄ‚îÄ /parse_finfak            # –ü–∞—Ä—Å–∏–Ω–≥
‚îÇ       ‚îú‚îÄ‚îÄ /finfak                  # –ó–∞–ø–∏—Å—å (–§–∏–Ω—Ñ–∞–∫)
‚îÇ       ‚îú‚îÄ‚îÄ /reserv                  # –ó–∞–ø–∏—Å—å (–≤—Å–µ)
‚îÇ       ‚îî‚îÄ‚îÄ –í–æ–ø—Ä–æ—Å—ã —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–º—É    # 3 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
‚îú‚îÄ‚îÄ main.py                          # ‚úÖ + reserv_router
‚îú‚îÄ‚îÄ requirements.txt                 # ‚úÖ + pytz
‚îî‚îÄ‚îÄ RESERV_SYSTEM_COMPLETE.md        # ‚úÖ –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üîç –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ Google Sheets

```bash
docker-compose logs -f bot | grep "–ù–∞—á–∏–Ω–∞—é —ç–∫—Å–ø–æ—Ä—Ç"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üì§ –ù–∞—á–∏–Ω–∞—é —ç–∫—Å–ø–æ—Ä—Ç –∑–∞–ø–∏—Å–∏ –≤ Google Sheets...
   –ö–∞–Ω–¥–∏–¥–∞—Ç: –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω
   –°–æ–±–µ—Å–µ–¥—É—é—â–∏–π: –ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä (ID: pet02)
   –í—Ä–µ–º—è: 09:00
   üìç –ó–∞–ø–∏—Å—ã–≤–∞—é –≤ —è—á–µ–π–∫—É B5
   ‚úÖ –ó–∞–ø–∏—Å—å –≤ '—Ñ–∏–Ω—Ñ–∞–∫_–∑–∞–ø–∏—Å–∏' —É—Å–ø–µ—à–Ω–∞
   üìç –î–æ–±–∞–≤–ª—è—é —Å—Ç—Ä–æ–∫—É –≤ '–≤—Å–µ–æ–±—â–∞—è'
   ‚úÖ –ó–∞–ø–∏—Å—å –≤ '–≤—Å–µ–æ–±—â–∞—è' —É—Å–ø–µ—à–Ω–∞
   ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω!
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î

```sql
-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ—Ç–æ–≤
SELECT COUNT(*) FROM reserv_time_slots;
SELECT COUNT(*) FROM finfak_time_slots;

-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
SELECT COUNT(*) FROM reserv_bookings;
SELECT COUNT(*) FROM finfak_bookings;

-- –î–µ—Ç–∞–ª–∏ –∑–∞–ø–∏—Å–µ–π
SELECT 
    p.full_name AS candidate,
    i.full_name AS interviewer,
    f.date,
    f.time_start,
    fb.status
FROM finfak_bookings fb
JOIN finfak_time_slots f ON f.id = fb.time_slot_id
JOIN interviewers i ON i.id = fb.interviewer_id
JOIN people p ON p.id = fb.person_id;
```

### –û—á–∏—Å—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
docker exec -it shend-db-1 psql -U postgres -d –≤–∞—à–∞_–±–∞–∑–∞

TRUNCATE TABLE reserv_bookings CASCADE;
TRUNCATE TABLE reserv_time_slots CASCADE;
TRUNCATE TABLE finfak_bookings CASCADE;
TRUNCATE TABLE finfak_time_slots CASCADE;

\q
```

---

## üéØ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

- [ ] PostgreSQL –∑–∞–ø—É—â–µ–Ω
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- [ ] pytz —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] Credentials –¥–ª—è Google Sheets –Ω–∞ –º–µ—Å—Ç–µ
- [ ] –î–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ –¥–∞–Ω (sha-bot-sobes@sha-otbor-476513.iam.gserviceaccount.com)
- [ ] –õ–∏—Å—Ç—ã "—Ä–µ–∑–µ—Ä–≤" –∏ "—Ñ–∏–Ω—Ñ–∞–∫" —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- [ ] –õ–∏—Å—Ç—ã "—Ä–µ–∑–µ—Ä–≤_–∑–∞–ø–∏—Å–∏" –∏ "—Ñ–∏–Ω—Ñ–∞–∫_–∑–∞–ø–∏—Å–∏" —Å–æ–∑–¥–∞–Ω—ã
- [ ] –°–æ–±–µ—Å–µ–¥—É—é—â–∏–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (`/register_sobes`)
- [ ] ID —Å–æ–±–µ—Å–µ–¥—É—é—â–∏—Ö —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∫–æ–ª–æ–Ω–∫–æ–π T
- [ ] –í —Ç–∞–±–ª–∏—Ü–µ –µ—Å—Ç—å "–º–æ–≥—É" –≤ —è—á–µ–π–∫–∞—Ö –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:

1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –¥–µ–Ω—å**
   ```sql
   SELECT COUNT(*) FROM finfak_bookings WHERE created_at::date = CURRENT_DATE;
   SELECT COUNT(*) FROM reserv_bookings WHERE created_at::date = CURRENT_DATE;
   ```

2. **–û—à–∏–±–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞**
   ```bash
   docker-compose logs bot | grep "–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞" | wc -l
   ```

3. **–°—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ª–æ—Ç–æ–≤**
   ```sql
   -- –°–∫–æ–ª—å–∫–æ —Å–ª–æ—Ç–æ–≤ –∑–∞–Ω—è—Ç–æ
   SELECT 
       COUNT(CASE WHEN is_available = false THEN 1 END) AS occupied,
       COUNT(CASE WHEN is_available = true THEN 1 END) AS free,
       COUNT(*) AS total
   FROM finfak_time_slots;
   ```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞—Ç

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞—Ç—ã:

**–§–∞–π–ª:** `handlers/reserv_handlers.py`

```python
# –î–∞—Ç—ã —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π
FINFAK_DATE = "2025-11-07"  # 7 –Ω–æ—è–±—Ä—è 2025 - –§–∏–Ω—Ñ–∞–∫
RESERV_DATE = "2025-11-08"  # 8 –Ω–æ—è–±—Ä—è 2025 - –†–µ–∑–µ—Ä–≤
```

**–§–∞–π–ª:** `utils/reserv_parser.py`

```python
RESERV_SHEETS = {
    "—Ä–µ–∑–µ—Ä–≤": {
        "date": "2025-11-08",  # 8 –Ω–æ—è–±—Ä—è 2025 - –†–µ–∑–µ—Ä–≤
        ...
    },
    "—Ñ–∏–Ω—Ñ–∞–∫": {
        "date": "2025-11-07",  # 7 –Ω–æ—è–±—Ä—è 2025 - –§–∏–Ω—Ñ–∞–∫
        ...
    }
}
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—á–∏:**
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ 2 –ª–∏—Å—Ç–æ–≤ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- ‚úÖ 2 –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø–∏—Å–∏ (/finfak, /reserv)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ (–¥–ª—è —Ñ–∏–Ω—Ñ–∞–∫–∞)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–ø—Ä–æ—à–µ–¥—à–∏–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è)
- ‚úÖ –°—á–µ—Ç—á–∏–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–æ–±–µ—Å–µ–¥—É—é—â–∏–º
- ‚úÖ –í–æ–ø—Ä–æ—Å—ã —Å–æ–±–µ—Å–µ–¥—É—é—â–µ–º—É
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ Google Sheets (2 —Ñ–æ—Ä–º–∞—Ç–∞)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç rate limiting
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ö–æ–º–∞–Ω–¥—ã:**
- `/parse_reserv` - –ø–∞—Ä—Å–∏–Ω–≥ —Ä–µ–∑–µ—Ä–≤–∞ (–∞–¥–º–∏–Ω)
- `/parse_finfak` - –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–∏–Ω—Ñ–∞–∫–∞ (–∞–¥–º–∏–Ω)
- `/finfak` - –∑–∞–ø–∏—Å—å –Ω–∞ —Ñ–∏–Ω—Ñ–∞–∫ (—Ç–æ–ª—å–∫–æ –§–∏–Ω—Ñ–∞–∫, 07.11.2025)
- `/reserv` - –∑–∞–ø–∏—Å—å –Ω–∞ —Ä–µ–∑–µ—Ä–≤ (–≤—Å–µ, 08.11.2025)

**–ú–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å! üöÄ**

---

**–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?** –ù–∞–ø–∏—à–∏—Ç–µ @yanejettt

